
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Scala's by-name parameters - Dear Future Self</title>
  <meta name="author" content="Nicolas Rinaudo">

  
  <meta name="description" content="Scala's by-name parameters 2013-04-11 Dear future self, You hopefully remember the time when you were attempting to teach yourself Scala with &hellip;">
  

  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://nrinaudo.github.io/blog/2013/04/11/scalas-by-name-parameters">
  <link href="/images/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/atom.xml" rel="alternate" title="Dear Future Self" type="application/atom+xml">
  <script src="/js/jquery.js"></script>
  <script src="/js/bootstrap-collapse.js"></script>
  <script src="/js/modernizr.js"></script>
  <script src="/js/octopress.js" type="text/javascript"></script>

  <!-- mathjax config similar to math.stackexchange -->
  <script type="text/x-mathjax-config">
    MathJax.Hub.Config({
     jax: ["input/TeX", "output/HTML-CSS"],
      tex2jax: {
        inlineMath: [['$', '$']],
        displayMath: [['$$', '$$']],
        processEscapes: true,
        skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
      },
      displayAlign: "left",
      messageStyle: "none",
      styles: {
        ".math": {
            "font-size": "80%"
        }
      },
      "HTML-CSS": { preferredFont: "TeX", availableFonts: ["STIX","TeX"] }
    });
  </script>
  <script src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS_HTML" type="text/javascript"></script>

  
  

</head>

<body   >
  <div class="navbar navbar-inverse navbar-static-top">
  	<div class="navbar-inner">
  	  <div class="container">
        <a class="btn btn-navbar" data-toggle="collapse" data-target=".navbar-responsive-collapse">
          <span class="fui-menu-24"></span>
        </a>
  	  	<div class="nav-collapse collapse navbar-responsive-collapse" style="height:0;">
  	      <ul class="nav">
    
        <li ><a href="/index.html">Home</a></li>
    
        <li ><a href="/blog/archives/index.html">Archives</a></li>
    
</ul>

<ul class="nav pull-right">
    
    <li><a href="http://github.com/nrinaudo" title="Github Profile"><i class="icon-github-sign social-navbar"></i></a></li>
    
    
    <li><a href="http://stackoverflow.com/users/1370349/nicolas-rinaudo" title="Stackoverflow Profile"><i class="icon-stackexchange social-navbar"></i></a></li>
    
    
    <li><a href="http://linkedin.com/in/nicolasrinaudo" title="Linkedin Profile"><i class="icon-linkedin-sign social-navbar"></i></a></li>
    
    
    <li><a href="http://twitter.com/NicolasRinaudo" title="Twitter Profile"><i class="icon-twitter-sign social-navbar"></i></a></li>
    
    
    
    
</ul>

  	    </div>
  	  </div>
  	</div>
  </div>
  <div class="container" id="main">
    <div class="span12">
      <div class="row-fluid">
        <div id="content">
          <div>
<article class="hentry" role="article">
  

  <header>
  <div class="jumbotron">
    Scala's by-name parameters
	<h5>








  


<i class="icon-calendar-empty"></i> <time datetime="2013-04-11T17:39:00+02:00" pubdate data-updated="true">2013-04-11</time></h5>
  </div>
</header>
  <div class="row-fluid">
    <div class="span12">
      <p>Dear future self,</p>

<p>You hopefully remember the time when you were attempting to teach yourself Scala with fondness, now that you have
mastered the language. Hopefully.</p>

<p>Well, <em>I</em>&#8216;m still in the middle of it, and just worked out what by-name parameters were and how they could be useful.
Feel free to have a read in case you forget - or, equaly likely, want to make fun of your past self for his limited
undestanding of what I hope is an obvious concept to you by now.</p>

<!-- more -->


<h2>Purpose</h2>

<p>As far as I can tell, by-name parameters are syntactic sugar for no-arg closure parameters (I <em>think</em> these are
actually called <a href="http://en.wikipedia.org/wiki/Thunk_(functional_programming)">thunks</a>). Take the following higher-order
function, for example:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='scala'><span class='line'><span class="c1">// Prints the value returned by the specified closure.</span>
</span><span class='line'><span class="k">def</span> <span class="n">printInt</span><span class="o">(</span><span class="n">f</span><span class="k">:</span> <span class="o">()</span> <span class="o">=&gt;</span> <span class="nc">Int</span><span class="o">)</span> <span class="o">{</span><span class="n">println</span><span class="o">(</span><span class="n">f</span><span class="o">())}</span>
</span></code></pre></td></tr></table></div></figure>


<p>This function can be quite awkward to manipulate:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
</pre></td><td class='code'><pre><code class='scala'><span class='line'><span class="k">val</span> <span class="n">x</span> <span class="k">=</span> <span class="mi">1</span>
</span><span class='line'>
</span><span class='line'><span class="c1">// We&#39;d really like to get rid of the &#39;() =&gt;&#39; bit, which is just noise.</span>
</span><span class='line'><span class="n">printInt</span><span class="o">(()</span> <span class="k">=&gt;</span> <span class="n">x</span> <span class="o">+</span> <span class="mi">2</span><span class="o">)</span>
</span><span class='line'>
</span><span class='line'><span class="c1">// This isn&#39;t legal: x + 2 has a type of Int, not () =&gt; Int</span>
</span><span class='line'><span class="n">printInt</span><span class="o">(</span><span class="n">x</span> <span class="o">+</span> <span class="mi">2</span><span class="o">)</span>
</span></code></pre></td></tr></table></div></figure>


<p>That&#8217;s when you use by-name parameters, a special Scala syntax that allows you to declare implicit no-arg closure
parameters.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
</pre></td><td class='code'><pre><code class='scala'><span class='line'><span class="c1">// Note the parameter declaration: &#39;: =&gt; Int&#39; is what declares a by-name parameter.</span>
</span><span class='line'><span class="k">def</span> <span class="n">printInt</span><span class="o">(</span><span class="n">value</span><span class="k">:</span> <span class="o">=&gt;</span> <span class="nc">Int</span><span class="o">)</span> <span class="o">{</span><span class="n">println</span><span class="o">(</span><span class="n">value</span><span class="o">)}</span>
</span><span class='line'>
</span><span class='line'><span class="c1">// Prints 3.</span>
</span><span class='line'><span class="k">val</span> <span class="n">x</span> <span class="k">=</span> <span class="mi">1</span>
</span><span class='line'><span class="n">printInt</span><span class="o">(</span><span class="n">x</span> <span class="o">+</span> <span class="mi">2</span><span class="o">)</span>
</span><span class='line'>
</span><span class='line'><span class="c1">// Prints 4.</span>
</span><span class='line'><span class="n">printInt</span><span class="o">(</span><span class="mi">4</span><span class="o">)</span>
</span><span class='line'>
</span><span class='line'><span class="c1">// Prints 5.</span>
</span><span class='line'><span class="k">val</span> <span class="n">f</span> <span class="k">=</span> <span class="o">()</span> <span class="k">=&gt;</span> <span class="mi">5</span>
</span><span class='line'><span class="n">printInt</span><span class="o">(</span><span class="n">f</span><span class="o">())</span>
</span></code></pre></td></tr></table></div></figure>


<p>In these 3 examples, the parameter to <code>printInt</code> is implicitly wrapped in a <code>() =&gt; Int</code> closure. Whenever <code>printInt</code>
tries to access its parameter&#8217;s value, the closure is executed and its return value used.</p>

<p>It&#8217;s worth stressing out that, in the previous example, <code>f()</code> is not actually called when passed to <code>printInt</code> but when
implicitly passed to <code>println</code>. The following illustrates this more clearly:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
</pre></td><td class='code'><pre><code class='scala'><span class='line'><span class="c1">// Added some trace before value is printed</span>
</span><span class='line'><span class="k">def</span> <span class="n">printInt</span><span class="o">(</span><span class="n">value</span><span class="k">:</span> <span class="o">=&gt;</span> <span class="nc">Int</span><span class="o">)</span> <span class="o">{</span>
</span><span class='line'>  <span class="n">println</span><span class="o">(</span><span class="s">&quot;in println&quot;</span><span class="o">)</span>
</span><span class='line'>  <span class="n">println</span><span class="o">(</span><span class="n">value</span><span class="o">)</span>
</span><span class='line'><span class="o">}</span>
</span><span class='line'>
</span><span class='line'><span class="c1">// Added some trace before 5 is returned.</span>
</span><span class='line'><span class="k">val</span> <span class="n">f</span> <span class="k">=</span> <span class="o">()</span> <span class="k">=&gt;</span> <span class="o">{</span>
</span><span class='line'>  <span class="n">println</span><span class="o">(</span><span class="s">&quot;in f&quot;</span><span class="o">)</span>
</span><span class='line'>  <span class="mi">5</span>
</span><span class='line'><span class="o">}</span>
</span><span class='line'>
</span><span class='line'><span class="c1">// This prints:</span>
</span><span class='line'><span class="c1">// in println</span>
</span><span class='line'><span class="c1">// in f</span>
</span><span class='line'><span class="c1">// 5</span>
</span><span class='line'><span class="n">printInt</span><span class="o">(</span><span class="n">f</span><span class="o">())</span>
</span></code></pre></td></tr></table></div></figure>


<h2>Origin of the name</h2>

<p>I find &#8220;by-name&#8221; to be an odd choice: after all, you&#8217;re not passing a name at all.</p>

<p>Here&#8217;s what Scala&#8217;s designer has to say about it:</p>

<blockquote><p>I think it dates back to Algol 60. Algol 60&#8217;s default convention was that the formal parameter would be literally<br/>replaced by the actual argument name (I believe the actual argument needed to be a single identifier then) in a<br/>procedure&#8217;s body. This made it possible to evaluate the argument several times as needed and also to change it by<br/>assignment. The language also had &#8221;call by value&#8217; parameters (that&#8217;s what&#8217;s used in almost all other languages), but<br/>these were declared with the special keyword `value&#8217; in front of them.</p><footer><strong>Martin Odersky</strong> <cite><a href='http://scala-programming-language.1934581.n4.nabble.com/Why-quot-by-name-quot-parameters-are-called-this-way-tt1944598.html#a1944599'>Why &#8220;By-name&#8221; Parameters Are Called This Way?</a></cite></footer></blockquote>


<h2>Not lazy parameters</h2>

<p>It&#8217;s important to realise that by-name parameters are not lazy parameters, and can only partially be used that way.</p>

<p>Lazy parameters will <a href="https://issues.scala-lang.org/browse/SI-240">hopefully</a> make it into Scala at some point. They are
parameters whose value is only computed when used for the first time, rather than at declaration time, which is great for
values that are expensive to compute and not used in all code paths.</p>

<p>The value of by-name parameters, on the other hand, is computed every single time the parameter is referenced. This can
have some unexpected and unpleasant side effects, such as in:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
</pre></td><td class='code'><pre><code class='scala'><span class='line'><span class="c1">// Simple class whose sole purpose is to increment and return an integer</span>
</span><span class='line'><span class="c1">// whenever its &#39;value()&#39; method is called.</span>
</span><span class='line'><span class="k">class</span> <span class="nc">Counter</span> <span class="o">{</span>
</span><span class='line'>  <span class="k">var</span> <span class="n">count</span> <span class="k">=</span> <span class="mi">0</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">def</span> <span class="n">value</span><span class="o">()</span> <span class="k">=</span> <span class="o">{</span>
</span><span class='line'>    <span class="n">count</span> <span class="o">+=</span> <span class="mi">1</span>
</span><span class='line'>    <span class="n">count</span>
</span><span class='line'>  <span class="o">}</span>
</span><span class='line'><span class="o">}</span>
</span><span class='line'>
</span><span class='line'><span class="c1">// Prints &#39;value&#39; &#39;count&#39; times.</span>
</span><span class='line'><span class="k">def</span> <span class="n">printNTimes</span><span class="o">(</span><span class="n">count</span><span class="k">:</span> <span class="kt">Int</span><span class="o">,</span> <span class="n">value</span><span class="k">:</span> <span class="o">=&gt;</span> <span class="nc">Int</span><span class="o">)</span> <span class="k">=</span> <span class="k">for</span><span class="o">(</span><span class="n">i</span> <span class="k">&lt;-</span> <span class="mi">0</span> <span class="n">until</span> <span class="n">count</span><span class="o">)</span> <span class="n">println</span><span class="o">(</span><span class="n">value</span><span class="o">)</span>
</span><span class='line'>
</span><span class='line'><span class="c1">// This prints:</span>
</span><span class='line'><span class="c1">// 1</span>
</span><span class='line'><span class="c1">// 2</span>
</span><span class='line'><span class="c1">// 3</span>
</span><span class='line'><span class="k">val</span> <span class="n">counter</span> <span class="k">=</span> <span class="k">new</span> <span class="nc">Counter</span><span class="o">()</span>
</span><span class='line'><span class="n">printNTimes</span><span class="o">(</span><span class="mi">3</span><span class="o">,</span> <span class="n">counter</span><span class="o">.</span><span class="n">value</span><span class="o">())</span>
</span></code></pre></td></tr></table></div></figure>


    </div>
  </div>



  <footer>
    <hr>
    
    <div class="row-fluid">
      <div class="span6">
        <p class="meta">
        
        



  <a href="/blog/categories/scala/"><span class="badge">scala</span></a>




        </p>
      </div>
    </div>
    
    <div class="row-fluid">
      <div class="span12">
        <p class="meta">
          
            <a class="basic-alignment left" href="/blog/2013/04/09/using-gpath-with-xmlslurper/" title="Previous Post: Using GPath with XmlSlurper">&laquo; Using GPath with XmlSlurper</a>
          
          
            <a class="basic-alignment right" href="/blog/2013/04/15/scalas-streams/" title="Next Post: Scala's streams">Scala's streams &raquo;</a>
          
        </p>
      </div>
    </div>
  </footer>
</article>

  <section>
    <h1>Comments</h1>
    <div id="disqus_thread" aria-live="polite"><noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</div>
  </section>

</div>


        </div>
      </div>
      <div class="row-fluid">
        <footer class="footer-page" role="contentinfo">
          <p>
  Copyright &copy; 2014 - Nicolas Rinaudo
</p>


        </footer>
      </div>
    </div>
  </div>
  

<script type="text/javascript">
      var disqus_shortname = 'futureself';
      
        
        // var disqus_developer = 1;
        var disqus_identifier = 'http://nrinaudo.github.io/blog/2013/04/11/scalas-by-name-parameters/';
        var disqus_url = 'http://nrinaudo.github.io/blog/2013/04/11/scalas-by-name-parameters/';
        var disqus_script = 'embed.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = 'http://' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>











</body>
</html>
